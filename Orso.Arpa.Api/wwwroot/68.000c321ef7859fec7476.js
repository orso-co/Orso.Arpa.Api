(self.webpackChunkorso_arpa_web=self.webpackChunkorso_arpa_web||[]).push([[68],{5166:(e,t,i)=>{"use strict";i.d(t,{w:()=>s});var n=i(8303),o=i(8619),r=i(8611);let s=(()=>{class e{constructor(e){this.apiService=e,this.baseUrl="/me"}getMyProfile(){return this.apiService.get(`${this.baseUrl}/profiles/user`).pipe((0,n.d)())}putProfile(e){return this.apiService.put(`${this.baseUrl}/profiles/user`,e).pipe((0,n.d)())}getMyAppointments(e,t){return this.apiService.get(`${this.baseUrl}/appointments?limit=${e}&offset=${t}`).pipe((0,n.d)())}setAppointmentPrediction(e,t){return this.apiService.put(`${this.baseUrl}/appointments/${e}/participation/prediction/${t}`,{}).pipe((0,n.d)())}getProfileMusician(e){return e?this.apiService.get(`${this.baseUrl}/profiles/musician/${e}`).pipe((0,n.d)()):this.apiService.get(`${this.baseUrl}/profiles/musician`).pipe((0,n.d)())}putProfileMusician(e){return this.apiService.post(`${this.baseUrl}/profiles/musician`,e).pipe((0,n.d)())}putProjectParticipation(e,t,i){return this.apiService.put(`${this.baseUrl}/profiles/musician/${e}/projects/${t}/participation`,i).pipe((0,n.d)())}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r.s))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},885:(e,t,i)=>{"use strict";i.d(t,{l:()=>l});var n=i(8512),o=i(2693),r=i(8303),s=i(6599),a=i(8619),p=i(8611);let l=(()=>{class e{constructor(e){this.apiService=e,this.sectionTrees=new Map,this.sections$$=new n.X([]),this.sections$=this.sections$$.asObservable(),this.sectionsLoaded=!1,this.baseUrl="/sections"}load(){return this.apiService.get(this.baseUrl).pipe((0,r.d)(),(0,s.b)(e=>this.sections$$.next(e)),(0,s.b)(e=>this.sectionsLoaded=!0))}loadTree(e){let t=new o.LE;return e&&(t=t.set("maxLevel",e.toString())),this.apiService.get(`${this.baseUrl}/tree`,t).pipe((0,r.d)(),(0,s.b)(t=>this.sectionTrees.set(e,t)))}treeLoaded(e){return this.sectionTrees.has(e)}getTree(e){return this.sectionTrees.get(e)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(p.s))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7558:(e,t,i)=>{"use strict";i.d(t,{W:()=>p});var n=i(8303),o=i(9996),r=i(6599),s=i(8619),a=i(8611);let p=(()=>{class e{constructor(e){this.apiService=e,this.selectValues=new Map,this.baseUrl="/tables"}load(e,t){return this.apiService.get(`${this.baseUrl}/${e}/properties/${t}`).pipe((0,n.d)(),(0,o.U)(e=>e.map(e=>this.mapSelectValueToSelectItem(e))),(0,r.b)(i=>this.selectValues.set(this.getMapKey(e,t),i)))}loaded(e,t){return this.selectValues.has(this.getMapKey(e,t))}get(e,t){return this.selectValues.get(this.getMapKey(e,t))||[]}getMapKey(e,t){return`${e}|${t}`}mapSelectValueToSelectItem(e){return{label:e.name,value:e.id}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(a.s))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8995:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ProfileModule:()=>fe});var n=i(1116),o=i(3464),r=i(4762),s=i(5932),a=i(8619),p=i(5959),l=i(3053);let c=(()=>{class e{constructor(e,t){this.menuService=e,this.router=t,this.menuEvents=new p.xQ,this.menuService.add("profile",[{label:"USER_PROFILE",command:e=>{this.menuEvents.next(e),this.router.navigate(["/arpa/profile/user"])}},{label:"MUSICIAN_PROFILE",roles:["performer"],command:e=>{this.menuEvents.next(e),this.router.navigate(["/arpa/profile/musician"])}},{label:"MY_APPOINTMENTS",command:e=>{this.menuEvents.next(e),this.router.navigate(["/arpa/profile/appointments"])}}])}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(l.h),a.LFG(o.F0))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();var u=i(4615),d=i(9343),m=i(3798);function g(e,t){if(1&e&&(a.TgZ(0,"div",1),a._UZ(1,"arpa-avatar",2),a._UZ(2,"arpa-menu",3),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("user",e.profile)("image",!0)}}let Z=(()=>{let e=class{constructor(e,t,i){this.router=e,this.route=t,this.profileService=i,this.menuEventSubscription=i.menuEvents.subscribe(()=>{this.selection=!0})}ngOnInit(){this.profile=this.route.snapshot.data.profile}return(e){this.selection=!1,this.router.navigate(["."],{relativeTo:this.route}),e.preventDefault()}};return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.F0),a.Y36(o.gz),a.Y36(c))},e.\u0275cmp=a.Xpm({type:e,selectors:[["arpa-appointments"]],decls:3,vars:0,consts:[["sideViewTemplate",""],[1,"p-flex-column"],[3,"user","image"],["name","profile"]],template:function(e,t){1&e&&(a.TgZ(0,"arpa-split-view"),a.YNc(1,g,3,2,"ng-template",null,0,a.W1O),a.qZA())},directives:[u._,d.A,m.M],styles:["[_nghost-%COMP%]     .side-view arpa-avatar{display:flex;width:100%;justify-content:center;margin-top:2em;margin-bottom:2em}[_nghost-%COMP%]     .side-view .arpa-menu .p-menu{border:0;width:100%;background-color:inherit}[_nghost-%COMP%]     .side-view .arpa-menu ul.p-menu-list{margin:0;padding:4em 10px 0;width:100%;list-style:none}[_nghost-%COMP%]     .side-view .arpa-menu ul.p-menu-list li{border:0;border-bottom:1px;border-color:var(--surface-d);border-style:solid;list-style:none}[_nghost-%COMP%]     .side-view .arpa-menu ul.p-menu-list li a>span:before{font-size:1.8em;margin-right:.5em}[_nghost-%COMP%]     .side-view .arpa-menu ul.p-menu-list li a.p-menuitem-link-active{background:#64b5f629}"]}),e=(0,r.__decorate)([(0,s.f)()],e),e})();var f=i(1041),h=i(3530),v=i(5166),A=i(7807),T=i(4313),q=i(4217),b=i(649);let x=(()=>{class e{constructor(e,t,i,n){this.route=t,this.meService=i,this.notificationsService=n,this.form=e.group({email:[null],phoneNumber:[null,[f.kI.minLength(1),f.kI.pattern(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/)]],givenName:[null],surname:[null],aboutMe:[null]})}ngOnInit(){this.profile=this.route.snapshot.data.profile,this.form.patchValue(this.profile),this.form.controls.email.disable()}submit(){this.meService.putProfile(Object.assign({},this.form.getRawValue())).pipe((0,h.P)()).subscribe(e=>{this.notificationsService.success("Profile updated.")},e=>{this.notificationsService.error("Could not update Profile.")})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(f.qu),a.Y36(o.gz),a.Y36(v.w),a.Y36(A.T))},e.\u0275cmp=a.Xpm({type:e,selectors:[["arpa-user"]],decls:50,vars:25,consts:[[1,"p-jc-center",3,"formGroup","ngSubmit"],[1,"p-grid","p-jc-center"],[1,"p-col-12","p-md-6","p-text-center"],[1,"p-grid","p-jc-center","show-mobile"],[3,"user","image"],[1,"p-col-12","p-md-3"],[1,"p-field","p-float-label"],["id","givenName","type","text","pInputText","","formControlName","givenName","autocomplete","givenName"],["for","float-input"],["id","surname","type","text","pInputText","","formControlName","surname","autocomplete","surname"],["id","email","type","text","pInputText","","formControlName","email","autocomplete","email"],["id","phoneNumber","type","text","pInputText","","formControlName","phoneNumber","autocomplete","phonenumber"],[1,"p-col-12","p-md-6"],["id","aboutMe","type","text","pInputText","","formControlName","aboutMe","autocomplete","aboutMe"],[1,"p-col-12","p-md-6","p-text-right"],[1,"p-field"],["pButton","",3,"label","disabled"]],template:function(e,t){1&e&&(a.TgZ(0,"form",0),a.NdJ("ngSubmit",function(){return t.submit()}),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"h1"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",3),a.TgZ(7,"div",2),a._UZ(8,"arpa-avatar",4),a.qZA(),a.qZA(),a.TgZ(9,"div",1),a.TgZ(10,"div",5),a.TgZ(11,"div",6),a._UZ(12,"input",7),a.TgZ(13,"label",8),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",5),a.TgZ(17,"div",6),a._UZ(18,"input",9),a.TgZ(19,"label",8),a._uU(20),a.ALo(21,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"div",1),a.TgZ(23,"div",5),a.TgZ(24,"div",6),a._UZ(25,"input",10),a.TgZ(26,"label",8),a._uU(27),a.ALo(28,"translate"),a.qZA(),a.qZA(),a.qZA(),a._UZ(29,"div",5),a.qZA(),a.TgZ(30,"div",1),a.TgZ(31,"div",5),a.TgZ(32,"div",6),a._UZ(33,"input",11),a.TgZ(34,"label",8),a._uU(35),a.ALo(36,"translate"),a.qZA(),a.qZA(),a.qZA(),a._UZ(37,"div",5),a.qZA(),a.TgZ(38,"div",1),a.TgZ(39,"div",12),a.TgZ(40,"div",6),a._UZ(41,"textarea",13),a.TgZ(42,"label",8),a._uU(43),a.ALo(44,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(45,"div",1),a.TgZ(46,"div",14),a.TgZ(47,"div",15),a._UZ(48,"button",16),a.ALo(49,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.Q6J("formGroup",t.form),a.xp6(4),a.Oqu(a.lcZ(5,11,"USER_PROFILE_DATA")),a.xp6(4),a.Q6J("user",t.profile)("image",!0),a.xp6(6),a.Oqu(a.lcZ(15,13,"GIVENNAME")),a.xp6(6),a.Oqu(a.lcZ(21,15,"SURNAME")),a.xp6(7),a.Oqu(a.lcZ(28,17,"EMAIL")),a.xp6(8),a.Oqu(a.lcZ(36,19,"PHONENUMBER")),a.xp6(8),a.Oqu(a.lcZ(44,21,"ABOUT_ME")),a.xp6(5),a.s9C("label",a.lcZ(49,23,"SAVE")),a.Q6J("disabled",t.form.invalid||t.form.pristine))},directives:[f._Y,f.JL,f.sg,d.A,f.Fj,T.o,f.JJ,f.u,q.Hq],pipes:[b.X$],styles:["input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}@media (min-width:768px){.show-mobile[_ngcontent-%COMP%]{display:none}}"]}),e})();var P=i(9996),I=i(8512),_=i(46),y=i(7558),M=i(9366),S=i(9220),U=i(1254),C=i(5212);const w=function(){return[]};function O(e,t){if(1&e&&(a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"label",19),a._uU(3),a.ALo(4,"translate"),a.qZA(),a._UZ(5,"p-multiSelect",20),a.ALo(6,"async"),a.ALo(7,"translate"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.Oqu(a.lcZ(4,3,"mupro.PREFERRED_PARTS")),a.xp6(2),a.Q6J("options",a.lcZ(6,5,e.preferredParts)||a.DdM(9,w))("placeholder",a.lcZ(7,7,"NOTHING_SELECTED"))}}let L=(()=>{class e{constructor(e,t,i,n){this.config=e,this.formBuilder=t,this.ref=i,this.selectValueService=n,this.profile=this.config.data.profile,this.sections=this.config.data.sections,this.preferredParts=new I.X(void 0),this.inquiryStatus=this.resolveSelect("InquiryStatusInner"),this.preferredPositions=this.resolveSelect("PreferredPositions")}resolveSelect(e){return this.selectValueService.load("MusicianProfile",e).pipe((0,P.U)(()=>this.selectValueService.get("MusicianProfile",e)))}get isNew(){return!this.profile}ngOnInit(){this.form=this.formBuilder.group({levelAssessmentInner:[1,[f.kI.min(1),f.kI.max(6)]],instrumentId:[null,[f.kI.required]],doublingInstruments:[null,[]],preferredPartsInner:[null,[]],inquiryStatusInnerId:[null,[]],preferredPositionsInnerIds:[null,[]],isMainProfile:[!1,[]]}),this.form.controls.instrumentId.valueChanges.subscribe(e=>{this.sections.pipe((0,P.U)(t=>t.find(t=>t.id===e)),(0,h.P)()).subscribe(e=>{if(e.instrumentPartCount>0){const t=[];for(let i=0;i<e.instrumentPartCount;i++)t.push({label:["I","II","III","IV","V","VI","VII","VIII","IX"][i],value:i+1});this.preferredParts.next(t)}})}),this.profile&&(this.form.patchValue(this.profile),this.form.controls.instrumentId.disable(),this.profile.isMainProfile&&this.form.controls.isMainProfile.disable())}onSubmit(){this.form.invalid||this.form.pristine||this.ref.close(Object.assign(Object.assign({},this.profile),this.form.value))}cancel(){this.ref.close(null)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(_.S),a.Y36(f.qu),a.Y36(_.E7),a.Y36(y.W))},e.\u0275cmp=a.Xpm({type:e,selectors:[["arpa-edit-musician-profile"]],decls:46,vars:51,consts:[[3,"formGroup","submit"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col"],["for","instrumentId"],["optionLabel","name","optionValue","id","formControlName","instrumentId",3,"options","placeholder","filter"],["for","levelAssessmentInner"],["formControlName","levelAssessmentInner",3,"cancel","stars"],["class","p-fluid p-formgrid p-grid",4,"ngIf"],["for","inquiryStatusInnerId"],["optionLabel","label","optionValue","value","formControlName","inquiryStatusInnerId",3,"options","placeholder"],["for","preferredPositionsInnerIds"],["optionLabel","label","optionValue","value","formControlName","preferredPositionsInnerIds","display","chip",3,"options","placeholder"],[1,"p-field-checkbox","p-col"],["name","isMainProfile","formControlName","isMainProfile",3,"binary"],["for","isMainProfile"],[1,"p-formgroup-inline","p-jc-between"],["pButton","","type","button","icon","pi pi-times","iconPos","left",1,"p-button-danger",3,"label","click"],[1,"p-field","p-col","p-text-right",2,"margin-right","0"],["pButton","","type","button","icon","pi pi-check","iconPos","left",3,"label","disabled","click"],["for","preferredPartsInner"],["optionLabel","label","optionValue","value","formControlName","preferredPartsInner","display","chip",3,"options","placeholder"]],template:function(e,t){1&e&&(a.TgZ(0,"form",0),a.NdJ("submit",function(e){return e.preventDefault()}),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"label",3),a._uU(4),a.ALo(5,"translate"),a.qZA(),a._UZ(6,"p-dropdown",4),a.ALo(7,"async"),a.ALo(8,"translate"),a.qZA(),a.qZA(),a.TgZ(9,"div",1),a.TgZ(10,"div",2),a.TgZ(11,"label",5),a._uU(12),a.ALo(13,"translate"),a.qZA(),a._UZ(14,"p-rating",6),a.qZA(),a.qZA(),a.YNc(15,O,8,10,"div",7),a.ALo(16,"async"),a.TgZ(17,"div",1),a.TgZ(18,"div",2),a.TgZ(19,"label",8),a._uU(20),a.ALo(21,"translate"),a.qZA(),a._UZ(22,"p-dropdown",9),a.ALo(23,"async"),a.ALo(24,"translate"),a.qZA(),a.qZA(),a.TgZ(25,"div",1),a.TgZ(26,"div",2),a.TgZ(27,"label",10),a._uU(28),a.ALo(29,"translate"),a.qZA(),a._UZ(30,"p-multiSelect",11),a.ALo(31,"async"),a.ALo(32,"translate"),a.qZA(),a.qZA(),a.TgZ(33,"div",1),a.TgZ(34,"div",12),a._UZ(35,"p-checkbox",13),a.TgZ(36,"label",14),a._uU(37),a.ALo(38,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(39,"div",15),a.TgZ(40,"div",2),a.TgZ(41,"button",16),a.NdJ("click",function(){return t.cancel()}),a.ALo(42,"translate"),a.qZA(),a.qZA(),a.TgZ(43,"div",17),a.TgZ(44,"button",18),a.NdJ("click",function(){return t.onSubmit()}),a.ALo(45,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.Q6J("formGroup",t.form),a.xp6(4),a.Oqu(a.lcZ(5,20,"mupro.MAIN_INSTURMENT")),a.xp6(2),a.Q6J("options",a.lcZ(7,22,t.sections)||a.DdM(48,w))("placeholder",a.lcZ(8,24,"NOTHING_SELECTED"))("filter",!0),a.xp6(6),a.Oqu(a.lcZ(13,26,"mupro.LEVEL_ASSESSMENT")),a.xp6(2),a.Q6J("cancel",!1)("stars",5),a.xp6(1),a.Q6J("ngIf",a.lcZ(16,28,t.preferredParts)),a.xp6(5),a.Oqu(a.lcZ(21,30,"mupro.INQUIRY_STATUS")),a.xp6(2),a.Q6J("options",a.lcZ(23,32,t.inquiryStatus)||a.DdM(49,w))("placeholder",a.lcZ(24,34,"NOTHING_SELECTED")),a.xp6(6),a.Oqu(a.lcZ(29,36,"mupro.PREFERRED_POSITIONS")),a.xp6(2),a.Q6J("options",a.lcZ(31,38,t.preferredPositions)||a.DdM(50,w))("placeholder",a.lcZ(32,40,"NOTHING_SELECTED")),a.xp6(5),a.Q6J("binary",!0),a.xp6(2),a.Oqu(a.lcZ(38,42,"mupro.MAIN_PROFILE")),a.xp6(4),a.Q6J("label",a.lcZ(42,44,"CANCEL")),a.xp6(3),a.Q6J("label",a.lcZ(45,46,t.isNew?"CREATE":"SAVE"))("disabled",t.form.pristine||t.form.invalid))},directives:[f._Y,f.JL,f.sg,M.Lt,f.JJ,f.u,S.iG,n.O5,U.NU,C.XZ,q.Hq],pipes:[b.X$,n.Ov],styles:[""]}),e})();var N=i(9963),E=i(5469),$=i(8451);function D(e,t){}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr"),a._UZ(1,"td",8),a.TgZ(2,"td",9),a.TgZ(3,"div",10),a.TgZ(4,"h3"),a._uU(5),a.ALo(6,"async"),a.qZA(),a.qZA(),a.TgZ(7,"div",11),a.TgZ(8,"button",12),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().openDialog(t)}),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw();a.xp6(1),a.ekj("active",e.isMainProfile)("inactive",e.isDeactivated),a.xp6(4),a.Oqu(a.lcZ(6,5,i.getSection(e)))}}const Y=function(){return[]};let Q=(()=>{class e{constructor(e,t,i,n,o,r){this.route=e,this.meService=t,this.dialogService=i,this.notificationsService=n,this.translate=o,this.logger=r,this.profiles=this.route.data.pipe((0,P.U)(e=>e.profiles)),this.sections=this.route.data.pipe((0,P.U)(e=>e.sections))}openDialog(e){this.dialogService.open(L,{data:{profile:e,sections:this.sections},header:this.translate.instant(e?"mupro.EDIT":"mupro.CREATE")}).onClose.pipe((0,h.P)()).subscribe(t=>{t&&e?(this.notificationsService.success("mupro.UPDATED"),this.logger.info("update:",e)):t&&this.create(t)})}getSection(e){return this.sections.pipe((0,P.U)(t=>{var i;return null===(i=t.find(t=>t.id===e.instrumentId))||void 0===i?void 0:i.name}))}create(e){this.meService.putProfileMusician(e).pipe((0,h.P)()).subscribe(()=>{this.notificationsService.success("mupro.CREATED"),this.profiles=this.meService.getProfileMusician()})}update(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.gz),a.Y36(v.w),a.Y36(_.xA),a.Y36(A.T),a.Y36(b.sK),a.Y36(N.m))},e.\u0275cmp=a.Xpm({type:e,selectors:[["arpa-musician"]],decls:15,vars:10,consts:[[1,"p-grid","p-jc-center"],[1,"p-col-12","p-md-6","p-text-center"],[1,"p-grid","p-jc-center",2,"margin-top","4rem"],[1,"p-col-12","p-md-10","p-lg-6"],[3,"value"],["pTemplate","header"],["pTemplate","body"],["pButton","","type","button","icon","pi pi-plus",3,"click"],[1,"status"],[1,"p-d-flex","p-jc-between"],[1,"p-mr-2"],[1,"p-flex-column"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-text","p-button-icon-only",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h1"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"div",2),a.TgZ(6,"div",3),a.TgZ(7,"p-table",4),a.ALo(8,"async"),a.YNc(9,D,0,0,"ng-template",5),a.YNc(10,J,9,7,"ng-template",6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",2),a.TgZ(12,"div",1),a.TgZ(13,"button",7),a.NdJ("click",function(){return t.openDialog()}),a.ALo(14,"translate"),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Oqu(a.lcZ(4,3,"mupro.MY_PROFILES")),a.xp6(4),a.Q6J("value",a.lcZ(8,5,t.profiles)||a.DdM(9,Y)),a.xp6(6),a.uIk("title",a.lcZ(14,7,"ADD_PROFILE")))},directives:[E.iA,$.jx,q.Hq],pipes:[b.X$,n.Ov],styles:[".status[_ngcontent-%COMP%]{width:2px}.status.inactive[_ngcontent-%COMP%]{background-color:red}.status.active[_ngcontent-%COMP%]{background-color:green}"]}),e})(),k=(()=>{class e{constructor(e){this.meService=e}resolve(e,t){return this.meService.getMyProfile()}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(v.w))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})();var R=i(878),j=i(5972),V=i(6280);const F=function(e){return{passed:e}};let z=(()=>{class e{constructor(e){this.primengConfig=e,this.date="",this.calendarDate=new Date}ngOnInit(){this.calendarDate=new Date(this.date)}get monthName(){return this.primengConfig.getTranslation("monthNames")[this.calendarDate.getMonth()]}get weekDay(){return this.primengConfig.getTranslation("dayNames")[this.calendarDate.getDay()]}get isPassed(){return this.calendarDate<new Date}}return e.\u0275fac=function(t){return new(t||e)(a.Y36($.b4))},e.\u0275cmp=a.Xpm({type:e,selectors:[["arpa-calendar-sheet"]],inputs:{date:"date"},decls:10,vars:16,consts:[[1,"container"],[1,"centered"],[3,"ngClass"],[1,"day",3,"ngClass"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"p",2),a._uU(3),a.qZA(),a.TgZ(4,"p",3),a._uU(5),a.qZA(),a.TgZ(6,"p",2),a._uU(7),a.qZA(),a.TgZ(8,"p",2),a._uU(9),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngClass",a.VKq(8,F,t.isPassed)),a.xp6(1),a.Oqu(t.weekDay),a.xp6(1),a.Q6J("ngClass",a.VKq(10,F,t.isPassed)),a.xp6(1),a.Oqu(t.calendarDate.getDate()),a.xp6(1),a.Q6J("ngClass",a.VKq(12,F,t.isPassed)),a.xp6(1),a.Oqu(t.monthName),a.xp6(1),a.Q6J("ngClass",a.VKq(14,F,t.isPassed)),a.xp6(1),a.Oqu(t.calendarDate.getFullYear()))},directives:[n.mk],styles:[".container[_ngcontent-%COMP%]{position:relative;text-align:center}.container[_ngcontent-%COMP%]   .centered[_ngcontent-%COMP%]{position:absolute;top:44%;left:41%;width:95px}.container[_ngcontent-%COMP%]   .centered[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary)}.container[_ngcontent-%COMP%]   .centered[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:xxx-large;font-weight:700;line-height:.8}.container[_ngcontent-%COMP%]   .centered[_ngcontent-%COMP%]   .passed[_ngcontent-%COMP%]{color:var(--text-color);opacity:.85}"]}),e})();var B=i(3277),G=i(9127),H=i(3682),X=i(1357);function K(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit,t=a.oxw();a.xp6(1),a.hij(" ",t.getProjectNames(e.projects)," ")}}function W(e,t){if(1&e&&(a.ynx(0),a._uU(1),a.BQk()),2&e){const e=a.oxw(2).$implicit,t=a.oxw();a.xp6(1),a.hij("(",t.getRoomNames(e.rooms),")")}}function ee(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",19),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"div",20),a.TgZ(5,"div",26),a.TgZ(6,"b"),a._uU(7),a.qZA(),a._UZ(8,"button",27),a.qZA(),a.YNc(9,W,2,1,"ng-container",21),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw();a.xp6(2),a.hij("",a.lcZ(3,5,"myappointments.VENUE"),":"),a.xp6(5),a.Oqu(null==e.venue?null:e.venue.name),a.xp6(1),a.Q6J("pTooltip",t.getVenueTooltip(e.venue))("escape",!1),a.xp6(1),a.Q6J("ngIf",e.rooms.length>0)}}function te(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",10),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"div",24),a.TgZ(5,"span"),a._uU(6),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.hij("",a.lcZ(3,2,"myappointments.EXPECTATION"),":"),a.xp6(4),a.Oqu(e.expectation)}}function ie(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",10),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"div",24),a._UZ(5,"p-message",28),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.hij("",a.lcZ(3,2,"myappointments.RESULT"),":"),a.xp6(3),a.Q6J("text",e.result)}}const ne=function(){return[]};function oe(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"div",15),a._UZ(2,"arpa-calendar-sheet",16),a.qZA(),a.TgZ(3,"div",17),a.TgZ(4,"div",18),a.TgZ(5,"div",19),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.TgZ(8,"div",20),a.TgZ(9,"b"),a._uU(10),a.qZA(),a.qZA(),a.TgZ(11,"div",19),a._uU(12),a.ALo(13,"translate"),a.qZA(),a.TgZ(14,"div",20),a.TgZ(15,"b"),a._uU(16),a.ALo(17,"date"),a.ALo(18,"date"),a.qZA(),a.qZA(),a.TgZ(19,"div",19),a._uU(20),a.ALo(21,"translate"),a.qZA(),a.TgZ(22,"div",20),a.YNc(23,K,2,1,"span",21),a.qZA(),a.YNc(24,ee,10,7,"ng-container",21),a.TgZ(25,"div",22),a.TgZ(26,"p-fieldset",23),a.ALo(27,"translate"),a.TgZ(28,"div",18),a.YNc(29,te,7,4,"ng-container",21),a.TgZ(30,"div",10),a._uU(31),a.ALo(32,"translate"),a.qZA(),a.TgZ(33,"div",24),a.TgZ(34,"p-dropdown",25),a.NdJ("ngModelChange",function(e){return t.$implicit.predictionId=e})("onChange",function(t){const i=a.CHM(e).$implicit;return a.oxw().onPredictionChanged(t,i)}),a.ALo(35,"translate"),a.ALo(36,"async"),a.qZA(),a.qZA(),a.YNc(37,ie,6,4,"ng-container",21),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw();a.xp6(2),a.Q6J("date",e.startTime),a.xp6(4),a.hij("",a.lcZ(7,19,"myappointments.NAME"),":"),a.xp6(4),a.Oqu(e.name),a.xp6(2),a.hij("",a.lcZ(13,21,"myappointments.TIME"),":"),a.xp6(4),a.AsE(" ",a.Dn7(17,23,e.startTime,"H:mm","locale(de)")," - ",a.Dn7(18,27,e.endTime,"H:mm","locale(de)")," "),a.xp6(4),a.hij("",a.lcZ(21,31,"myappointments.PROJECTS"),":"),a.xp6(3),a.Q6J("ngIf",e.projects.length>0),a.xp6(1),a.Q6J("ngIf",e.venue),a.xp6(2),a.Q6J("legend",a.lcZ(27,33,"myappointments.PARTICIPATION")),a.xp6(3),a.Q6J("ngIf",e.expectation),a.xp6(2),a.hij("",a.lcZ(32,35,"myappointments.PREDICTION"),":"),a.xp6(3),a.Q6J("autoDisplayFirst",!1)("placeholder",a.lcZ(35,37,"myappointments.SELECT_PREDICTION"))("ngModel",e.predictionId)("autoDisplayFirst",!1)("options",a.lcZ(36,39,i.predictionOptions$)||a.DdM(41,ne))("disabled",e.result),a.xp6(3),a.Q6J("ngIf",e.result)}}function re(e,t){if(1&e&&(a.TgZ(0,"b"),a._uU(1),a.qZA()),2&e){const e=a.oxw().$implicit;a.xp6(1),a.Oqu(e.name)}}const se=function(){return{"text-align":"center"}};function ae(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",29),a.TgZ(1,"p-panel"),a.YNc(2,re,2,1,"ng-template",30),a._UZ(3,"arpa-calendar-sheet",16),a.TgZ(4,"div",31),a._uU(5),a.ALo(6,"date"),a.ALo(7,"date"),a.qZA(),a._UZ(8,"hr",32),a.TgZ(9,"p-dropdown",33),a.NdJ("ngModelChange",function(e){return t.$implicit.predictionId=e})("onChange",function(t){const i=a.CHM(e).$implicit;return a.oxw().onPredictionChanged(t,i)}),a.ALo(10,"translate"),a.ALo(11,"async"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=a.oxw();a.xp6(1),a.Akn(a.DdM(25,se)),a.xp6(2),a.Q6J("date",e.startTime),a.xp6(2),a.lnq(" ",a.Dn7(6,13,e.startTime,"H:mm","locale(de)")," - ",a.Dn7(7,17,e.endTime,"H:mm","locale(de)")," ",null==e.venue?null:e.venue.name," "),a.xp6(4),a.Q6J("autoDisplayFirst",!1)("placeholder",a.lcZ(10,21,"myappointments.SELECT_PREDICTION"))("showClear",!0)("ngModel",e.predictionId)("autoDisplayFirst",!1)("options",a.lcZ(11,23,i.predictionOptions$)||a.DdM(26,ne))("disabled",e.result)}}let pe=(()=>{class e{constructor(e,t,i){this.meService=e,this.route=t,this.notificationsService=i,this.userAppointments$=(0,R.of)([]),this.totalRecordsCount$=(0,R.of)(0),this.predictionOptions$=(0,R.of)([]),this.itemsPerPage=3}ngOnInit(){this.predictionOptions$=this.route.data.pipe((0,P.U)(e=>e.predictions||[]))}loadData(e,t){const i=this.meService.getMyAppointments(e,t);this.userAppointments$=i.pipe((0,P.U)(e=>e.userAppointments)),this.totalRecordsCount$=i.pipe((0,P.U)(e=>e.totalRecordsCount))}getProjectNames(e){return e.map(e=>e.title).join(", ")}getVenueTooltip(e){if(!e)return"";let t=`<p><b>${e.name}</b>`;return e.description&&(t+=`<br/><small>${e.description}</small>`),t+="</p>",e.address&&(e.address.address1&&(t+=`<p>${e.address.address1}`),e.address.address2&&(t+=`<br/>${e.address.address2}</p>`),t+=`<br/>${e.address.zip} ${e.address.city}`,e.address.urbanDistrict&&(t+=` (${e.address.urbanDistrict})`),t+="</p>"),t}getRoomNames(e){return e.map(e=>e.name).join(", ")}onPredictionChanged(e,t){this.meService.setAppointmentPrediction(t.id,e.value).pipe((0,h.P)()).subscribe(()=>this.notificationsService.success("myappointments.PREDICTION_SET"))}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(v.w),a.Y36(o.gz),a.Y36(A.T))},e.\u0275cmp=a.Xpm({type:e,selectors:[["arpa-my-appointments"]],decls:25,vars:23,consts:[[1,"p-grid","p-jc-center"],[1,"p-col-12","p-md-6","p-text-center"],[1,"card","p-m-auto",2,"max-width","800px"],["paginatorPosition","both",3,"value","paginator","rows","lazy","totalRecords","onLazyLoad"],["dv",""],[1,"p-helper-clearfix"],[1,"p-grid","p-ai-center","vertical-container"],[1,"p-col-6","p-md-2"],[1,"p-col-6","p-md-1"],["mode","decimal",3,"ngModel","showButtons","min","max","step","ngModelChange","onInput"],[1,"p-col-12","p-md-3"],[1,"p-col-12","p-md-6","p-text-right"],["pTemplate","listItem"],["pTemplate","gridItem"],[1,"p-grid","p-p-5"],[1,"p-col-12","p-md-3","p-text-center",2,"justify-content","flex-start","display","flex","flex-wrap","nowrap","align-items","flex-start"],[3,"date"],[1,"p-col-12","p-md-9","appointment-details"],[1,"p-grid"],[1,"p-col-3","p-sm-6"],[1,"p-col-9","p-sm-6"],[4,"ngIf"],[1,"p-col-12"],[3,"legend"],[1,"p-col-12","p-md-9"],["id","prediction",3,"autoDisplayFirst","placeholder","ngModel","options","disabled","ngModelChange","onChange"],[2,"display","flex","align-items","center"],["pButton","","type","button","icon","pi pi-info-circle","tooltipPosition","right","tooltipEvent","focus",1,"p-button-rounded","p-button-outlined","p-button-text","p-ml-1",3,"pTooltip","escape"],["severity","info",3,"text"],[1,"p-col-12","p-md-6","p-lg-4","p-p-1"],["pTemplate","header"],[1,"appointment-detail"],[1,"p-widget-content",2,"border-top","0"],["id","prediction",3,"autoDisplayFirst","placeholder","showClear","ngModel","options","disabled","ngModelChange","onChange"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h1"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"div",2),a.TgZ(6,"p-dataView",3,4),a.NdJ("onLazyLoad",function(e){return t.loadData(e.rows,e.first)}),a.ALo(8,"async"),a.ALo(9,"async"),a.TgZ(10,"p-header"),a.TgZ(11,"div",5),a.TgZ(12,"div",6),a.TgZ(13,"div",7),a.TgZ(14,"label"),a._uU(15),a.ALo(16,"translate"),a.qZA(),a.qZA(),a.TgZ(17,"div",8),a.TgZ(18,"p-inputNumber",9),a.NdJ("ngModelChange",function(e){return t.itemsPerPage=e})("onInput",function(){return t.loadData(t.itemsPerPage,0)}),a.ALo(19,"async"),a.qZA(),a.qZA(),a._UZ(20,"div",10),a.TgZ(21,"div",11),a._UZ(22,"p-dataViewLayoutOptions"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(23,oe,38,42,"ng-template",12),a.YNc(24,ae,12,27,"ng-template",13),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Oqu(a.lcZ(4,12,"MY_APPOINTMENTS")),a.xp6(3),a.Q6J("value",a.lcZ(8,14,t.userAppointments$)||a.DdM(22,ne))("paginator",!0)("rows",t.itemsPerPage)("lazy",!0)("totalRecords",a.lcZ(9,16,t.totalRecordsCount$)||0),a.xp6(9),a.Oqu(a.lcZ(16,18,"myappointments.ITEMS_PER_PAGE")),a.xp6(3),a.Q6J("ngModel",t.itemsPerPage)("showButtons",!0)("min",1)("max",a.lcZ(19,20,t.totalRecordsCount$)||0)("step",1))},directives:[j.VO,$.h4,V.Rn,f.JJ,f.On,j.uE,$.jx,z,n.O5,B.p,M.Lt,q.Hq,G.u,H.q,X.s],pipes:[b.X$,n.Ov,n.uU],styles:[""]}),e})();var le=i(7534),ce=i(172);let ue=(()=>{class e{constructor(e){this.meService=e}resolve(e,t){const{id:i}=e.params;return this.meService.getProfileMusician(i)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(v.w))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var de=i(3097);const me=[{path:"",component:Z,resolve:{profile:k},children:[{path:"",redirectTo:"user",pathMatch:"full"},{path:"user",component:x,resolve:{profile:k}},{path:"appointments",component:pe,data:{roles:[le.Q.performer,le.Q.staff,le.Q.admin]},resolve:{predictions:ce.g}},{path:"musician",component:Q,resolve:{profiles:ue,sections:de.i}}]}];let ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.Bz.forChild(me)],o.Bz]}),e})();var Ze=i(2155);let fe=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[c,k,ce.g],imports:[[n.ez,Ze.m,ge,b.aw]]}),e})()},7534:(e,t,i)=>{"use strict";i.d(t,{Q:()=>n});var n=function(e){return e.admin="admin",e.performer="performer",e.staff="staff",e}({})}}]);